const express=require("express"),jwt=require("jsonwebtoken"),app=express();function verifyToken(req,res,next){const bearerHeader=req.headers.authorization;if(void 0!==bearerHeader){const bearerToken=bearerHeader.split(" ")[1];req.token=bearerToken,next()}else res.sendStatus(403)}app.get("/api",(req,res)=>{res.json({message:"Nodejs and JWT"})}),app.post("/api/login",(req,res)=>{const user={id:1,nombre:"Giancarlo LÃ³pez",email:"glopez@mail.com"};jwt.sign({user:user},"secretkey",(err,token)=>{res.json({token:token})})}),app.post("/api/posts",verifyToken,(req,res)=>{jwt.verify(req.token,"secretkey",(error,authData)=>{error?res.sendStatus(403):res.json({message:"Post fue creado",authData:authData})})}),app.listen(3e3,()=>{console.log("Nodejs app running...")});
//# sourceMappingURL=index.min.js.map